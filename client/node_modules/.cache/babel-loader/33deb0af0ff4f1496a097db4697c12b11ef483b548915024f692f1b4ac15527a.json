{"ast":null,"code":"var _jsxFileName = \"/Users/junmao/Desktop/CSE316_HW/project-thomaschuchu/client/src/components/searchResultsPage.js\";\nimport React from 'react';\nimport { PostSection, InfoSection, ButtonDisplay, orderNewest, PostCount } from './homePage.js';\nimport noSearchIcon from '../images/no-search-result-icon.svg';\nimport { filterPosts } from './communityPage.js';\n\n//console.log(\"IN THE SEARCH PAGE NOW\");\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class TheSearchResultsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      order: orderNewest\n    };\n    this.updateOrder = this.updateOrder.bind(this);\n  }\n  updateOrder(newOrder) {\n    //console.log(\"UPDATING ORDER\");\n    this.setState({\n      order: newOrder\n    });\n  }\n  render() {\n    const {\n      txtInput,\n      goToPostPage,\n      posts,\n      communities,\n      comments,\n      linkFlairs,\n      handleOrderButtonClick,\n      loggedIn,\n      userInfo\n    } = this.props;\n    //console.log(\"this is search text input\", txtInput);\n    const wordArray = txtInput.trim().toLowerCase().split(\" \");\n    //console.log(wordArray);\n    const filtered = Array.from(filterPosts('search', wordArray, posts, communities, comments, linkFlairs));\n    let userCommunityPosts = [];\n    let otherCommunityPosts = filtered;\n    if (loggedIn) {\n      const userCommunities = communities.filter(community => community.members.includes(userInfo[0]));\n      userCommunityPosts = filtered.filter(post => userCommunities.some(community => community.postIDs.includes(post._id)));\n      otherCommunityPosts = filtered.filter(post => !userCommunityPosts.some(userPost => userPost._id === post._id));\n    }\n    const noPostsFound = userCommunityPosts.length === 0 && otherCommunityPosts.length === 0;\n\n    //console.log(\"FILTERED\", Array.from(filtered));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"homePage\",\n      className: \"main_cont_divs\",\n      children: [/*#__PURE__*/_jsxDEV(SearchResultPageHeader, {\n        txtInput: txtInput,\n        posts: filtered,\n        handleOrderButtonClick: handleOrderButtonClick,\n        updateOrder: this.updateOrder\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"totalPostDiv\",\n        children: [/*#__PURE__*/_jsxDEV(PostCount, {\n          arrayLength: filtered.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 17\n        }, this), \" Total\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), noPostsFound && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"noPostsImage\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          id: \"noSearchIcon\",\n          alt: \"No search results\",\n          src: noSearchIcon,\n          height: \"100%\",\n          width: \"100%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this), !noPostsFound && loggedIn && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Your Communities\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(PostSection, {\n          posts: userCommunityPosts,\n          comments: comments,\n          linkFlairs: linkFlairs,\n          communities: communities,\n          order: this.state.order,\n          goToPostPage: goToPostPage,\n          page: 'home'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true), !noPostsFound && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: loggedIn ? \"Other Communities\" : \"All Communities\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(PostSection, {\n          posts: otherCommunityPosts,\n          comments: comments,\n          linkFlairs: linkFlairs,\n          communities: communities,\n          order: this.state.order,\n          goToPostPage: goToPostPage,\n          page: 'home'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this);\n  }\n}\nclass SearchResultPageHeader extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(InfoSection, {\n        txtInput: this.props.txtInput,\n        page: 'search',\n        posts: this.props.posts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ButtonDisplay, {\n        handleOrderButtonClick: this.props.handleOrderButtonClick,\n        updateOrder: this.props.updateOrder\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this);\n  }\n}","map":{"version":3,"names":["React","PostSection","InfoSection","ButtonDisplay","orderNewest","PostCount","noSearchIcon","filterPosts","jsxDEV","_jsxDEV","Fragment","_Fragment","TheSearchResultsPage","Component","constructor","props","state","order","updateOrder","bind","newOrder","setState","render","txtInput","goToPostPage","posts","communities","comments","linkFlairs","handleOrderButtonClick","loggedIn","userInfo","wordArray","trim","toLowerCase","split","filtered","Array","from","userCommunityPosts","otherCommunityPosts","userCommunities","filter","community","members","includes","post","some","postIDs","_id","userPost","noPostsFound","length","id","className","children","SearchResultPageHeader","fileName","_jsxFileName","lineNumber","columnNumber","arrayLength","alt","src","height","width","page"],"sources":["/Users/junmao/Desktop/CSE316_HW/project-thomaschuchu/client/src/components/searchResultsPage.js"],"sourcesContent":["import React from 'react';\nimport {PostSection, InfoSection, ButtonDisplay, orderNewest, PostCount} from './homePage.js';\nimport noSearchIcon from '../images/no-search-result-icon.svg'\nimport { filterPosts } from './communityPage.js';\n\n//console.log(\"IN THE SEARCH PAGE NOW\");\n\n\nexport default class TheSearchResultsPage extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {order: orderNewest};\n\n        this.updateOrder = this.updateOrder.bind(this);\n    }\n\n    updateOrder(newOrder){\n        //console.log(\"UPDATING ORDER\");\n        this.setState({order: newOrder})\n    }\n\n\n    render(){\n        const {txtInput, goToPostPage, posts, communities,  comments, linkFlairs, handleOrderButtonClick, loggedIn, userInfo } = this.props;\n        //console.log(\"this is search text input\", txtInput);\n        const wordArray = txtInput.trim().toLowerCase().split(\" \");\n        //console.log(wordArray);\n        const filtered = Array.from(filterPosts('search', wordArray, posts, communities,  comments, linkFlairs));\n\n        let userCommunityPosts = [];\n        let otherCommunityPosts = filtered;\n\n        if (loggedIn) {\n            const userCommunities = communities.filter((community) =>\n                community.members.includes(userInfo[0])\n            );\n\n            userCommunityPosts = filtered.filter((post) =>\n                userCommunities.some((community) => community.postIDs.includes(post._id))\n            );\n\n            otherCommunityPosts = filtered.filter(\n                (post) => !userCommunityPosts.some((userPost) => userPost._id === post._id)\n            );\n        }\n\n        const noPostsFound = userCommunityPosts.length === 0 && otherCommunityPosts.length === 0;\n\n        //console.log(\"FILTERED\", Array.from(filtered));\n        return(\n            <div id=\"homePage\" className=\"main_cont_divs\">\n                <SearchResultPageHeader txtInput={txtInput} posts={filtered} handleOrderButtonClick={handleOrderButtonClick}  updateOrder={this.updateOrder}/>\n                <div id=\"totalPostDiv\">\n                <PostCount arrayLength = {filtered.length}/> Total\n                </div>\n                {noPostsFound && (\n                    <div className=\"noPostsImage\">\n                        <img\n                            id=\"noSearchIcon\"\n                            alt=\"No search results\"\n                            src={noSearchIcon}\n                            height=\"100%\"\n                            width=\"100%\"\n                        />\n                    </div>\n                )}\n\n                {(!noPostsFound && loggedIn) && (\n                    <>\n                        <h3>Your Communities</h3>\n                        <PostSection\n                                posts={userCommunityPosts}\n                                comments={comments} \n                                linkFlairs={linkFlairs} \n                                communities={communities} \n                                order={this.state.order} \n                                goToPostPage={goToPostPage}\n                                page={'home'}\n                        />\n                    </>\n                )}\n                {!noPostsFound && (\n                    <>\n                    <h3>{loggedIn ? \"Other Communities\" : \"All Communities\"}</h3>\n                        <PostSection\n                            posts={otherCommunityPosts}\n                            comments={comments} \n                            linkFlairs={linkFlairs} \n                            communities={communities} \n                            order={this.state.order} \n                            goToPostPage={goToPostPage}\n                            page={'home'}\n                        />\n                    </>\n                )}\n            </div>\n        );\n    }\n}\n\nclass SearchResultPageHeader extends React.Component{\n    render(){\n        \n        return(\n            <div id=\"header\">\n                <InfoSection\n                    txtInput={this.props.txtInput}\n                    page={'search'}\n                    posts={this.props.posts}\n                />\n                <ButtonDisplay\n                    handleOrderButtonClick={this.props.handleOrderButtonClick} \n                    updateOrder={this.props.updateOrder}\n                />\n            </div>\n        );\n    }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}